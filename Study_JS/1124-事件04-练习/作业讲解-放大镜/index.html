<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<style>
			body{
				margin: 0;
			}
			#box{
				width: 350px;
				height: 350px;
				background:url(../img/small.jpg) no-repeat ;
				background-size: 350px 350px;
				border: 1px solid #000;
				position: relative;
				margin-left: 100px;
				margin-top: 50px;
				float: left;
			}
			#mask{
				width: 175px;
				height: 175px;
				background-color: yellow;
				opacity: 0.5;
				position: absolute;
				left: 0;
				top: 0;
				display: none;
			}
			#right{
				width: 400px;
				height: 400px;
				border: 1px solid #000; 
				float: left;
				margin-left: 100px;
				display: none;
				background: url(../img/big.jpg);
				background-size:800px 800px;
				/*background-position: -200px 0px;*/
			}
		</style>
	</head>
	<body>
		<div id="box">
			<div id="mask"></div>
		</div>
		<div id="right"></div>
		<script>
			var box = document.getElementById("box");
			var mask = document.getElementById("mask");
			var right = document.getElementById("right");
			box.onmousemove = function(e){
				mask.style.display = "block";
				right.style.display = "block";
				var x = e.clientX - box.getBoundingClientRect().left-mask.offsetWidth/2;
				var y = e.clientY - box.getBoundingClientRect().top-mask.offsetHeight/2;
				var maxLeft = box.clientWidth-mask.offsetWidth;
				var maxTop = box.clientHeight-mask.offsetHeight;
				if(x<0){
					x = 0;
				}
				if(x>maxLeft){
					x = maxLeft;
				}
				if(y<0){
					y = 0;
				}
				if(y>maxTop){
					y=maxTop;
				}
				mask.style.left = x +"px";
				mask.style.top = y +"px";
				
				right.style.backgroundPosition = -400*x / maxLeft + "px "+-400*y / maxTop+"px";
			}
			box.onmouseout = function(){
				mask.style.display = "none";
				right.style.display = "none";
			}
		</script>
	</body>
</html>
