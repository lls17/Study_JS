<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<style>
			ul{list-style: none;}
			#list ul{display: none;}
		</style>
	</head>
	<body>
		<ul id="list">
			<li>
				<h2>+第一级1</h2>
				<ul>
					<li>
						<h2>+第二级</h2>
						<ul>
							<li>
								<h2>+第三级</h2>
								<ul>
									<li>
										<h2>第四级</h2>
									</li>
									<li>
										<h2>第四级</h2>
									</li>
									<li>
										<h2>第四级</h2>
									</li>
								</ul>
							</li>
							<li>
								<h2>第三级</h2>
							</li>
							<li>
								<h2>第三级</h2>
							</li>
						</ul>
					</li>
					<li>
						<h2>+第二级</h2>
						<ul>
							<li>
								<h2>+第三级</h2>
								<ul>
									<li>
										<h2>第四级</h2>
									</li>
									<li>
										<h2>第四级</h2>
									</li>
									<li>
										<h2>第四级</h2>
									</li>
								</ul>
							</li>
							<li>
								<h2>第三级</h2>
							</li>
							<li>
								<h2>第三级</h2>
							</li>
						</ul>
					</li>
					<li>
						<h2>第二级</h2>
					</li>
				</ul>
			</li>
			<li>
				<h2>+第一级2</h2>
				<ul>
					<li>
						<h2>+第二级</h2>
						<ul>
							<li>
								<h2>+第三级</h2>
								<ul>
									<li>
										<h2>第四级</h2>
									</li>
									<li>
										<h2>第四级</h2>
									</li>
								</ul>
							</li>
							<li>
								<h2>第三级</h2>
							</li>
							<li>
								<h2>第三级</h2>
							</li>
						</ul>
					</li>
					<li>
						<h2>第二级</h2>
					</li>
					<li>
						<h2>第二级</h2>
					</li>
				</ul>
			</li>
			<li>
				<h2>+第一级3</h2>
				<ul>
					<li>
						<h2>+第二级</h2>
						<ul>
							<li>
								<h2>+第三级</h2>
								<ul>
									<li>
										<h2>第四级</h2>
									</li>
									<li>
										<h2>第四级</h2>
									</li>
									<li>
										<h2>第四级</h2>
									</li>
								</ul>
							</li>
							<li>
								<h2>+第三级</h2>
								<ul>
									<li>
										<h2>第四级</h2>
									</li>
									<li>
										<h2>第四级</h2>
									</li>
									<li>
										<h2>第四级</h2>
									</li>
								</ul>
							</li>
							<li>
								<h2>第三级</h2>
							</li>
						</ul>
					</li>
					<li>
						<h2>第二级</h2>
					</li>
					<li>
						<h2>第二级</h2>
					</li>
				</ul>
			</li>
			<li>
				<h2>+第一级4</h2>
				<ul>
					<li>
						<h2>+第二级</h2>
						<ul>
							<li>
								<h2>+第三级</h2>
								<ul>
									<li>
										<h2>第四级</h2>
									</li>
									<li>
										<h2>第四级</h2>
									</li>
									<li>
										<h2>第四级</h2>
									</li>
								</ul>
							</li>
							<li>
								<h2>+第三级</h2>
								<ul>
									<li>
										<h2>第四级</h2>
									</li>
									<li>
										<h2>第四级</h2>
									</li>
									<li>
										<h2>第四级</h2>
									</li>
								</ul>
							</li>
							<li>
								<h2>第三级</h2>
							</li>
						</ul>
					</li>
					<li>
						<h2>第二级</h2>
					</li>
					<li>
						<h2>第二级</h2>
					</li>
				</ul>
			</li>
		</ul>
		<script type="text/javascript">
//			var h2s = document.getElementsByTagName("h2");
//			for (var j = 0; j < h2s.length; j++) {
//				h2s[j].flag = false;
//				h2s[j].onclick = function(){
//					if(this.nextElementSibling){
//						if(this.flag){
//							this.nextElementSibling.style.display = "none";
//						}else{
//							this.nextElementSibling.style.display = "block";
//						}
//						this.flag = !this.flag;
//					}
//				};
//			}
			
			var h2s = document.getElementsByTagName("h2");
			for (var j = 0; j < h2s.length; j++) {
				h2s[j].flag = false;
				h2s[j].onclick = function(){
					var flag = this.flag;
					closeChildren(this.parentElement.parentElement);
					if(this.nextElementSibling){
						if(!flag){ //再开
							if(this.nextElementSibling){
								this.nextElementSibling.style.display = "block";
							}
						}
					}
					this.flag = !flag;
				};
			}
			function closeChildren(obj){
				var h2s = obj.getElementsByTagName("h2");
				for (var i = 0; i < h2s.length; i++) {
					h2s[i].flag = false;  //false代表关
				}
				
				var uls = obj.getElementsByTagName("ul");
				for (var i = 0; i < uls.length; i++) {
					uls[i].style.display = "none";
				}
			}
			
		</script>
	</body>
</html>
